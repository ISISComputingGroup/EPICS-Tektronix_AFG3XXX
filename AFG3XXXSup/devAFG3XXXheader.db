record(bo, "$(P)DISABLE")
{
  field(DESC, "Disable comms")
  field(PINI, "YES")
  field(VAL, "0")
  field(OMSL, "supervisory")
  field(ZNAM, "COMMS ENABLED")
  field(ONAM, "COMMS DISABLED")
}

record(bo, "$(P)SIM")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
    field(ZNAM, "NO")
    field(ONAM, "YES")
}

record(stringin, "$(P)IDN")
{
    field(DESC, "SCPI identification string")
    field(DTYP, "stream")
    field(INP,  "@devAFG3XXX.proto getIDN $(PORT)")
    field(PINI, "YES")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:IDN")
    field(SDIS, "$(P)DISABLE")
}

record(bo, "$(P)TRIGGER")
{
    field(DESC, "Generate a trigger event")
    field(DTYP, "stream")
    field(OUT, "@devAFG3XXX.proto trigger $(PORT)")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:TRIGGER")
    field(SDIS, "$(P)DISABLE")
}

alias("$(P)TRIGGER", "$(P)TRIGGER:SP")

## general read/write

record(stringout, "$(P)READ:SP")
{
    field(DESC, "General input command")
    field(VAL, "*IDN?")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:READ")
    field(SDIS, "$(P)DISABLE")
    field(FLNK, "$(P)READ")
    info(archive, "VAL")
}

record(stringin, "$(P)READ")
{
    field(DESC, "General input command response")
    field(DTYP, "stream")
    field(INP, "@devAFG3XXX.proto readCommand($(P)READ:SP) $(PORT)")
    field(SCAN, "Passive")
    field(SIOL, "$(P)SIM:READ")
    field(SIML, "$(P)SIM")
    field(SDIS, "$(P)DISABLE")
    info(INTEREST, "HIGH")
    info(archive, "VAL")
}

record(stringin, "$(P)SIM:READ")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P)READ", "$(P)READ:SP:RBV")
alias("$(P)SIM:READ", "$(P)SIM:READ:SP")
alias("$(P)SIM:READ", "$(P)SIM:READ:SP:RBV")

record(stringout, "$(P)WRITE:SP")
{
    field(DESC, "General output command")
    field(DTYP, "stream")
    field(OUT, "@devAFG3XXX.proto writeCommand $(PORT)")
    field(SCAN, "Passive")
    field(SIOL, "$(P)SIM:WRITE")
    field(SIML, "$(P)SIM")
    field(SDIS, "$(P)DISABLE")
    info(archive, "VAL")
    info(INTEREST, "HIGH")
}

record(stringin, "$(P)SIM:WRITE")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P)WRITE:SP", "$(P)WRITE:SP:RBV")
alias("$(P)SIM:WRITE", "$(P)SIM:WRITE:SP")
alias("$(P)SIM:WRITE", "$(P)SIM:WRITE:SP:RBV")


## SIMULATION

record(stringin, "$(P)SIM:IDN")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

record(bo, "$(P)SIM:TRIGGER")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

record(bo, "$(P)SIM:DISABLE")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

